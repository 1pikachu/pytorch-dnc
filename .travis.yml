language: python
python:
  - "3.6"
# command to install dependencies
before_install:
  - sudo apt-get -qq update
  - sudo apt-get install software-properties-common
  - sudo apt-get install libopenblas-dev
  - sudo ln -s /usr/lib/libopenblas.so /usr/lib/libopenblas.so.3
  - wget https://developer.nvidia.com/compute/cuda/8.0/Prod2/local_installers/cuda-repo-ubuntu1604-8-0-local-ga2_8.0.61-1_amd64-deb -O /tmp/cuda.deb
  - sudo dpkg -i /tmp/cuda.deb
  - sudo apt-get update
  - sudo apt-get install cuda
install:
  - pip install http://download.pytorch.org/whl/cu75/torch-0.2.0.post3-cp36-cp36m-manylinux1_x86_64.whl
  - pip install numpy
  - pip install visdom
# command to run tests
script:
  - cp /usr/lib/python3.6/site-packages/torch/lib/libgomp-ae56ecdc.so.1.0.0 /usr/lib/libgomp.so.1
  - pip install -e .
  - pytest ./test